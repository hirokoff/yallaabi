<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Лекция № 7 - Модель процесса</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            font-size: 2.2em;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #667eea;
        }

        h2 {
            color: #34495e;
            font-size: 1.6em;
            margin: 25px 0 15px 0;
            padding: 8px 0;
            border-bottom: 1px solid #ecf0f1;
        }

        p {
            margin-bottom: 16px;
            text-align: justify;
            font-size: 1.1em;
            line-height: 1.7;
        }

        .content-block {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #667eea;
        }

        .topic-section {
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #dee2e6;
        }

        .sub-topic {
            margin: 12px 0;
            padding: 12px;
            background: white;
            border-radius: 6px;
            border-left: 3px solid #28a745;
        }

        .definition {
            background: #e8f4fd;
            padding: 18px;
            border-radius: 8px;
            margin: 18px 0;
            border-left: 4px solid #3498db;
            font-style: italic;
        }

        .questions-section {
            background: #e2e3e5;
            padding: 25px;
            border-radius: 8px;
            margin: 25px 0;
            border: 1px solid #6c757d;
        }

        .question-item {
            background: white;
            padding: 18px;
            border-radius: 6px;
            margin: 12px 0;
            border-left: 4px solid #17a2b8;
        }

        .answer {
            background: #d4edda;
            padding: 12px;
            border-radius: 5px;
            margin-top: 8px;
            border-left: 3px solid #28a745;
        }

        ul, ol {
            margin: 10px 0 10px 30px;
        }

        ul li, ol li {
            margin-bottom: 8px;
            padding: 6px;
            background: #f8f9fa;
            border-radius: 4px;
        }

        strong {
            color: #2c3e50;
        }

        code {
            background: #f1f3f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            color: #c7254e;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
                margin: 10px;
            }
            
            h1 {
                font-size: 1.8em;
            }
            
            h2 {
                font-size: 1.4em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Лекция № 7</h1>
        <h2>Модель процесса. Создание процесса. Завершение процесса</h2>
        
        <div class="content-block">
            <p><strong>Процесс</strong> в операционных системах — это исполнение программы с учетом всех необходимых ресурсов.</p>
            <p>Когда процесс запускается, операционная система выделяет ему ресурсы (например, память, процессорное время и другие), управляет его выполнением, а по завершении освобождает эти ресурсы. Изучение процессов важно для понимания работы операционной системы, а также для оптимизации ее работы и разработки программного обеспечения.</p>
        </div>

        <div class="topic-section">
            <h2>1 Модель процесса</h2>
            
            <div class="definition">
                <p>Модель процесса представляет собой абстракцию, которая описывает, как процессы работают в операционной системе, как они взаимодействуют с ресурсами и как выполняются.</p>
            </div>

            <p>Рассмотрим основные компоненты модели процесса:</p>
            <ul>
                <li><strong>Программа</strong> — это последовательность команд, которая выполняется процессором. Когда программа запускается, она превращается в процесс.</li>
                <li><strong>Процесс</strong> — это активная сущность, представляющая собой выполнение программы, которая включает не только код, но и состояние выполнения, выделенные ресурсы (память, время процессора и т. д.), а также информацию о ее текущем состоянии.</li>
                <li><strong>Процессорное время</strong> — это время, которое процессор выделяет для выполнения процесса. В многозадачных операционных системах процессы могут выполняться параллельно или поочередно.</li>
            </ul>

            <p>Основные компоненты процесса:</p>
            <ol>
                <li><strong>Идентификатор процесса (PID)</strong> — уникальный номер, который операционная система присваивает каждому процессу.</li>
                <li><strong>Состояние процесса</strong> — процесс может находиться в различных состояниях: готов к выполнению, выполняется в данный момент, заблокирован в ожидании ресурсов и т. д.</li>
                <li><strong>Контекст процесса</strong> — включает в себя информацию, необходимую для продолжения выполнения процесса, такую как регистры процессора, стек вызовов, указатели на память и другие данные.</li>
            </ol>
        </div>

        <div class="topic-section">
            <h2>2 Создание процесса</h2>
            
            <p>Создание нового процесса — это важный шаг в операционной системе, и процесс создается с помощью системных вызовов. Основные этапы создания процесса:</p>
            <ol>
                <li><strong>Инициализация процесса:</strong> Процесс создается при помощи системного вызова, как правило, <code>fork()</code> в операционных системах семейства UNIX или CreateProcess в Windows. Этот вызов приводит к тому, что операционная система выделяет память для нового процесса и копирует данные из родительского процесса.</li>
                <li><strong>Копирование контекста:</strong> Новый процесс, как правило, является копией родительского процесса (когда используется системный вызов <code>fork()</code>), и в процессе создания копируются все данные, связанные с выполнением: память, регистрационные данные и т. д. Однако могут быть и другие случаи, например, создание процесса с новым кодом, как это происходит при вызове <code>exec()</code> в UNIX.</li>
                <li><strong>Ресурсы:</strong> Операционная система выделяет процессу необходимые ресурсы, такие как память и время процессора. В многозадачной операционной системе управление процессами осуществляется с помощью планировщика, который решает, когда процесс будет выполняться.</li>
                <li><strong>Назначение состояния процесса:</strong> После создания процесс может быть в одном из нескольких состояний: в очереди на выполнение, готов к исполнению, выполняется или ожидает ресурсы.</li>
            </ol>
        </div>

        <div class="topic-section">
            <h2>3 Завершение процесса</h2>
            
            <p>Завершение процесса — это последний этап его жизненного цикла. Это может произойти по разным причинам: выполнение всех команд программы, ошибка, получение сигнала от другого процесса и другие. Основные причины завершения процесса:</p>
            <ol>
                <li><strong>Нормальное завершение:</strong> Процесс завершает свою работу, когда он выполнил все операции, для которых был создан. В UNIX-системах это может быть вызов системного вызова <code>exit()</code>, который освобождает все ресурсы, связанные с процессом.</li>
                <li><strong>Завершение по ошибке:</strong> Процесс может завершиться с ошибкой, например, если он не смог получить нужные ресурсы, произошла ошибка в коде или возникла ошибка выполнения.</li>
                <li><strong>Прерывание процесса:</strong> Процесс может быть принудительно завершен другими процессами (например, при помощи команды <code>kill</code> в UNIX или аналогичных команд в других системах). Процесс, завершивший выполнение, может оставаться в системе некоторое время в так называемом "зомби-состоянии". В это время его ресурсы еще не освобождены, но процесс уже не выполняется.</li>
            </ol>
            <p>Операционная система освобождает ресурсы и окончательно удаляет процесс только когда родительский процесс выполнит системный вызов wait().</p>
        </div>

        <div class="topic-section">
            <h2>4 Управление завершением процесса</h2>
            
            <p>Завершение процесса обычно происходит в несколько этапов:</p>
            <ol>
                <li><strong>Освобождение ресурсов:</strong> память, дескрипторы файлов, другие ресурсы, которые были выделены процессу, освобождаются.</li>
                <li><strong>Обработка статуса завершения:</strong> операционная система может оставить информацию о завершении процесса для его родителя, чтобы тот мог обработать результат работы дочернего процесса.</li>
                <li><strong>Удаление процесса:</strong> процесс исчезает из списка процессов операционной системы.</li>
            </ol>
        </div>

        <div class="questions-section">
            <h2>Вопросы и ответы по лекции № 7</h2>
            <h3>Процессы в операционной системе</h3>
            
            <div class="question-item">
                <p><strong>1. Что такое процесс в операционной системе?</strong></p>
                <div class="answer">
                    <p>Процессы представляют собой экземпляры выполняемых программ вместе с информацией о состоянии выполнения, используемых ресурсах и необходимых атрибутах.</p>
                    <p>Отличие между программой и процессом состоит в следующем:</p>
                    <p>Программа — это статичный набор инструкций, хранящийся в файле, тогда как процесс — это запущенная программа с выделенными ей ресурсами.</p>
                </div>
            </div>

            <div class="question-item">
                <p><strong>2. Опишите этапы создания нового процесса.</strong></p>
                <div class="answer">
                    <p>Этапами создания нового процесса являются:</p>
                    <ol type="a">
                        <li>Инициализация процесса через системный вызов (<code>fork()</code> в Unix-подобных ОС)</li>
                        <li>Копирование контекста родительского процесса (память, файловые дескрипторы, окружающая среда)</li>
                        <li>Выделение уникального идентификатора PID и адреса пространства памяти</li>
                        <li>Установка начального состояния (готов к выполнению)</li>
                        <li>Регистрация процесса в таблице процессов операционной системы</li>
                    </ol>
                </div>
            </div>

            <div class="question-item">
                <p><strong>3. Какие ресурсы выделяет операционная система для процесса при его создании?</strong></p>
                <div class="answer">
                    <p>Ресурсы, выделяемые системой для процесса:</p>
                    <ul>
                        <li>Адресное пространство виртуальной памяти</li>
                        <li>Время центрального процессора (квант времени)</li>
                        <li>Файловые дескрипторы и права доступа к вводу-выводу</li>
                        <li>Другие специальные ресурсы (сетевые сокеты, устройства ввода-вывода и т.д.)</li>
                    </ul>
                </div>
            </div>

            <div class="question-item">
                <p><strong>4. Что происходит при завершении процесса в операционной системе? Какие могут быть причины его завершения?</strong></p>
                <div class="answer">
                    <p>При завершении процесса происходят следующие события:</p>
                    <ul>
                        <li>Освобождаются используемые ресурсы (память, дескрипторы файлов и т.д.)</li>
                        <li>Удаляются таблицы управления процессами и файловыми дескрипторами</li>
                        <li>Родительскому процессу передается статус завершения (если применимо)</li>
                    </ul>
                    <p>Причины завершения процесса:</p>
                    <ul>
                        <li>Нормальное завершение после выполнения поставленных задач</li>
                        <li>Ошибка выполнения (например, недостаток ресурсов, сегментная ошибка)</li>
                        <li>Принудительное завершение другим процессом (например, команда <code>kill</code>)</li>
                    </ul>
                </div>
            </div>

            <div class="question-item">
                <p><strong>5. Что такое "зомби-процесс" и когда он возникает?</strong></p>
                <div class="answer">
                    <p>Зомби-процесс — это процесс, завершившийся, но оставшийся зарегистрированным в таблице процессов, пока родительский процесс не обработает сигнал завершения, вызвав системный вызов <code>wait()</code>. Обычно это связано с неправильной обработкой завершения родительским процессом.</p>
                </div>
            </div>

            <div class="question-item">
                <p><strong>6. Какой системный вызов в UNIX используется для создания нового процесса?</strong></p>
                <div class="answer">
                    <p>Для создания нового процесса в UNIX-системах применяется системный вызов <code>fork()</code>, создающий точную копию текущего процесса.</p>
                </div>
            </div>

            <div class="question-item">
                <p><strong>7. В чём заключается различие между нормальным завершением процесса и его завершением по ошибке?</strong></p>
                <div class="answer">
                    <p>Различия заключаются в следующем:</p>
                    <ul>
                        <li>Нормальное завершение означает успешное выполнение всех запланированных операций и передачу статуса завершения родительскому процессу</li>
                        <li>Завершение по ошибке вызвано сбоями (отсутствие ресурсов, неверный синтаксис, критические ошибки) и иногда сопровождается выдачей сообщений об ошибках</li>
                    </ul>
                </div>
            </div>

            <div class="question-item">
                <p><strong>8. Как операционная система освобождает ресурсы, связанные с завершившимся процессом?</strong></p>
                <div class="answer">
                    <p>Система автоматически освобождает ресурсы таким образом:</p>
                    <ul>
                        <li>Возвращает память обратно в систему</li>
                        <li>Закрывает открытые файлы и сетевые подключения</li>
                        <li>Удаляет записи о процессе из управляющих структур</li>
                    </ul>
                    <p>Полностью удаление происходит лишь после обработки родительским процессом сигнала завершения.</p>
                </div>
            </div>

            <div class="question-item">
                <p><strong>9. Что произойдет в операционной системе, если родительский процесс не вызовет <code>wait()</code> для обработки завершения дочернего процесса?</strong></p>
                <div class="answer">
                    <p>Если родительский процесс не вызовет <code>wait()</code> для обработки завершения дочернего процесса, то процесс останется в состоянии "зомби", сохраняя запись в таблице процессов до момента, пока родитель не обработает его завершение. Сам процесс при этом уже остановлен и не потребляет никаких ресурсов.</p>
                </div>
            </div>
        </div>
    </div>
</body>
</html>